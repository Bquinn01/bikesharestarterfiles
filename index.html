<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>Bike Share: Locations and Quantity</title>
  <link rel="stylesheet" href="/static/leaflet/leaflet.css">
  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
  <script src='https://cdn.rawgit.com/mikefresh/cccb2b7571f6de2a4fd96c6271a1b8a3/raw/7b716366fc8fe27b9ecace1bbdcd4cf8d82980fd/citi.json'></script>
  <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.41.0/mapbox-gl.js'></script>
  <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.41.0/mapbox-gl.css' rel='stylesheet' />
  <link rel="stylesheet" href="styles.css">
</head>

<body>
  <div id='map'></div>
  <script>
    mapboxgl.accessToken = 'pk.eyJ1IjoiYnF1aW5uIiwiYSI6ImNqOTY4ZHp1ZzAxcTIycW82M204bzJtbDgifQ.C_LI72WHDf5ZNLg2IWBWTA';
    var map = new mapboxgl.Map({
      container: 'map',
      style: 'mapbox://styles/mapbox/streets-v9',
      zoom: 11,
      center: [-74.000, 40.7751908]
    })
    let searchURL = ('https://cdn.rawgit.com/mikefresh/cccb2b7571f6de2a4fd96c6271a1b8a3/raw/7b716366fc8fe27b9ecace1bbdcd4cf8d82980fd/citi.json?fields=longitude,latitude,availableBikes')
    axios(searchURL).then(response => {
      loopLocation(response.data)
    })

    function loopLocation(data) {
      let locations = data.stationBeanList;
      for (location of locations) {
        if (stationBeanList.longitude, stationBeanList.latitude) {
          let location = el
          el.className = "Marker"
          var marker = new mapboxgl.Marker(el)
            .setLngLat([stationBeanList.longitude,stationBeanList.latitude])
            .addTo(map);
        }
      }
    };
  </script>
</body>

</html>
